#include "stdio.h"
#include "xparameters.h"
#include "xgpiops.h"

#define GPIOPS_ID XPAR_XGPIOPS_0_DEVICE_ID

#define MIO_LED0 7
#define MIO_LED1 8
#define MIO_KEY0 12
#define EMIO_KEY 54

int main(){
    
    printf("EMIO TEST!\n");
    
    XGpioPs gpiops_inst;
    XGpioPs_Config *gpiops_cfg_ptr;

    gpiops_cfg_ptr = XGpioPs_LookupConfig(GPIOPS_ID);

    XGpioPs_CfgInitialize(&gpiops_inst, gpiops_cfg_ptr, gpiops_cfg_ptr -> BaseAddr);

    XGpioPs_SetDirectionPin(&gpiops_inst, MIO_LED0, 1);
    XGpioPs_SetDirectionPin(&gpiops_inst, MIO_LED1, 1);

    XGpioPs_SetOutputEnablePin(&gpiops_inst, MIO_LED0, 1);
    XGpioPs_SetOutputEnablePin(&gpiops_inst, MIO_LED1, 1);

    XGpioPs_SetDirectionPin(&gpiops_inst, MIO_KEY0, 0);
    XGpioPs_SetDirectionPin(&gpiops_inst, EMIO_KEY, 0);

    while(1){
        XGpioPs_WritePin(&gpiops_inst, MIO_LED0, ~XGpioPs_ReadPin(&gpiops_inst, MIO_KEY0));

        XGpioPs_WritePin(&gpiops_inst, MIO_LED1, ~XGpioPs_ReadPin(&spiops_inst, EMIO_KEY));

    }

    return 0;
}





